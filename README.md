# Qwen3 Fine-tuner

ä¸€ä¸ªä¸“ä¸šçš„ Qwen3 æ¨¡å‹å¾®è°ƒå¹³å°ï¼Œæä¾›ç«¯åˆ°ç«¯çš„æ•°æ®å¤„ç†ã€è®­ç»ƒç¼–æ’ä»¥åŠç°ä»£åŒ–çš„ Web ç•Œé¢ã€‚

> ğŸ“ **é¡¹ç›®è·¯å¾„**: `/Users/bytedance/code/learn/all4you`
> ğŸŒ **å›½å†…ä¼˜åŒ–**: æ·±åº¦é›†æˆ ModelScopeï¼Œæ¨¡å‹ä¸‹è½½åŠ é€Ÿ 5-10 å€
> ğŸš€ **æ¨èæ¨¡å‹**: Qwen3-0.6Bï¼ˆå¿«é€ŸéªŒè¯ï¼‰ / Qwen3-4Bï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

## æ–‡æ¡£ç´¢å¼•

| ä¸»é¢˜ | å†…å®¹æ¦‚è§ˆ |
| --- | --- |
| [å¿«é€Ÿä¸Šæ‰‹](docs/getting-started.md) | å®‰è£…ã€å¯åŠ¨ã€å¸¸è§å·¥ä½œæµã€æ•…éšœæ’é™¤ä¸ FAQ |
| [ModelScope é›†æˆæŒ‡å—](docs/integrations/modelscope.md) | å›½å†…é•œåƒåŠ é€Ÿã€ç¼“å­˜ç®¡ç†ã€CLI/Python ç”¨æ³• |
| [å¼€å‘ä¸æµ‹è¯•æ‰‹å†Œ](docs/development.md) | æœ¬åœ°å¼€å‘ç¯å¢ƒã€ä»£ç é£æ ¼ã€åç«¯/å‰ç«¯æµ‹è¯•å‘½ä»¤ |
| [é¡¹ç›®æŠ¥å‘Šå½’æ¡£](docs/reports/README.md) | Bug ä¿®å¤ã€é˜¶æ®µæ€»ç»“ä¸äº¤ä»˜æŠ¥å‘Šç´¢å¼• |

## åŠŸèƒ½äº®ç‚¹

- âœ¨ **å¤šç§å¾®è°ƒæ–¹æ³•**ï¼šSFTã€LoRAã€QLoRAã€DPOã€GRPO
- ğŸš€ **é«˜æ•ˆè®­ç»ƒ**ï¼šUnsloth åŠ é€Ÿã€FlashAttention-2ã€æ··åˆç²¾åº¦
- ğŸ’¾ **çµæ´»æ•°æ®å¤„ç†**ï¼šæ”¯æŒ JSONã€CSVã€JSONL ç­‰å¤šç§æ ¼å¼
- ğŸŒ **Web æ§åˆ¶å°**ï¼šå®æ—¶è®­ç»ƒç›‘æ§ã€æ¨¡å‹ç®¡ç†ã€æ•°æ®é¢„è§ˆ
- ğŸ¯ **å¼€ç®±å³ç”¨**ï¼šå†…ç½®è®­ç»ƒé…ç½®æ¨¡æ¿ä¸æ¨èæ¨¡å‹
- ğŸ“Š **ç»Ÿä¸€æ—¥å¿—**ï¼šå®Œæ•´çš„è®­ç»ƒæ—¥å¿—ã€æŒ‡æ ‡ä¸ä»»åŠ¡è¿›åº¦

## å¿«é€Ÿå¼€å§‹

1. **å®‰è£…ä¾èµ–**ï¼š`pip install -r requirements.txt`
2. **ä¸€é”®å¯åŠ¨**ï¼š`./scripts/deploy.sh`ï¼ˆæˆ–åœ¨ Windows ä¸Šè¿è¡Œ `scripts\\deploy.bat`ï¼‰
3. **æ‰‹åŠ¨å¯åŠ¨åç«¯**ï¼š`python backend/app.py`
4. **æ‰‹åŠ¨å¯åŠ¨å‰ç«¯ï¼ˆå¯é€‰ï¼‰**ï¼š`cd frontend && npm install && npm run dev`
5. **è®¿é—®æœåŠ¡**ï¼š
   - API æ–‡æ¡£ï¼šhttp://localhost:8000/docs
   - Web ç•Œé¢ï¼šhttp://localhost:5173

> è¯¦ç»†å®‰è£…æ­¥éª¤ä¸å¸¸è§é—®é¢˜ï¼Œè¯·å‚è§ [å¿«é€Ÿä¸Šæ‰‹æŒ‡å—](docs/getting-started.md)ã€‚

### ä¸€é”®æ•°æ®å¤„ç† + å¾®è°ƒ + è¯„æµ‹

ä½¿ç”¨æ–°çš„ CLI è„šæœ¬å¯åœ¨å•æ¡å‘½ä»¤ä¸­å®Œæˆæ•°æ®æ¸…æ´—ã€æ¨¡å‹è®­ç»ƒä¸è‡ªåŠ¨åŒ–è¯„æµ‹ï¼š

```bash
python scripts/pipeline.py --data path/to/dataset.json --data-format alpaca --eval-ratio 0.1
```

è„šæœ¬ä¼šå°†å¤„ç†åçš„æ•°æ®å’Œè¯„æµ‹ç»“æœä¿å­˜åœ¨ `backend/outputs/pipeline-run/`ï¼ˆæˆ– `--output-dir` æŒ‡å®šçš„ç›®å½•ï¼‰ä¸‹ï¼Œé»˜è®¤ä½¿ç”¨ `Qwen/Qwen3-7B` ä½œä¸ºè¯„æµ‹æ¨¡å‹ï¼Œå¯é€šè¿‡ `--judge-model` è‡ªå®šä¹‰æˆ–åŠ ä¸Š `--no-judge` å…³é—­ã€‚

è‹¥å¸Œæœ›ç›´æ¥ä»é­”æ­ï¼ˆModelScopeï¼‰æ‹‰å–å…¬å¼€æ•°æ®é›†ï¼Œå¯ä½¿ç”¨æ–°å¢çš„å‚æ•°ï¼š

```bash
# ç›´æ¥ä¸‹è½½é­”æ­é¢„è®¾æ•°æ®é›†å¹¶å®Œæˆåç»­æµç¨‹
python scripts/pipeline.py --moda-dataset content_understanding --moda-limit 2000

# è‡ªå®šä¹‰å­—æ®µæ˜ å°„ä¸åˆ‡åˆ†
python scripts/pipeline.py \
  --moda-dataset iic/nlp_search_intent \
  --moda-fields instruction=query,output=intent \
  --data-format alpaca
```

ç‹¬ç«‹çš„æ•°æ®ä¸‹è½½å·¥å…·ä½äº `scripts/download_dataset.py`ï¼Œæ”¯æŒåˆ—å‡ºé¢„è®¾ã€åªæ‹‰å–åŸå§‹æ•°æ®æˆ–ç”Ÿæˆè‡ªå®šä¹‰æ˜ å°„ï¼š

```bash
./scripts/download_dataset.py --list
./scripts/download_dataset.py content_understanding --limit 500 --show-json
```

## ç›®å½•ç»“æ„

```
all4you/
â”œâ”€â”€ backend/                # åç«¯æœåŠ¡ï¼ˆFastAPI + SQLAlchemyï¼‰
â”‚   â”œâ”€â”€ api/               # æ•°æ®ã€è®­ç»ƒã€æ¨¡å‹ç­‰ API è·¯ç”±
â”‚   â”œâ”€â”€ core/              # æ•°æ®å¤„ç†ã€è®­ç»ƒå¼•æ“ã€æ¨¡å‹ç®¡ç†
â”‚   â”œâ”€â”€ models/            # Pydantic æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ app.py             # FastAPI åº”ç”¨å…¥å£
â”œâ”€â”€ frontend/              # Vue3 + Element Plus å‰ç«¯
â”‚   â””â”€â”€ src/              # é¡µé¢ã€ç»„ä»¶ä¸è·¯ç”±
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£ï¼ˆæŒ‡å—ã€é›†æˆã€æŠ¥å‘Šï¼‰
â”‚   â”œâ”€â”€ integrations/     # å¤–éƒ¨æœåŠ¡ä¸ç”Ÿæ€é›†æˆ
â”‚   â”œâ”€â”€ reports/          # é˜¶æ®µæ€§æŠ¥å‘Šä¸æ€»ç»“
â”‚   â””â”€â”€ *.md              # æŒ‡å—ã€æ‰‹å†Œç­‰
â”œâ”€â”€ examples/              # ç¤ºä¾‹æ•°æ®ä¸é…ç½®
â”œâ”€â”€ requirements.txt       # Python ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ scripts/               # è‡ªåŠ¨åŒ–è„šæœ¬ä¸ CLI å·¥å…·
â”‚   â”œâ”€â”€ deploy.sh / deploy.bat   # é›¶ä¾èµ–ä¸€é”®éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ dev.sh                    # æœ¬åœ°å¼€å‘ä¾¿æ·å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ setup.sh / setup.bat      # ä¾èµ–å®‰è£…ä¸ç¯å¢ƒæ£€æŸ¥
â”‚   â”œâ”€â”€ start.sh / start.bat      # æ‰‹åŠ¨å¯åŠ¨åç«¯ + å‰ç«¯è„šæœ¬
â”‚   â”œâ”€â”€ pipeline.py              # æ•°æ®å¤„ç† + è®­ç»ƒ + è¯„æµ‹ä¸€é”® CLI
â”‚   â””â”€â”€ download_dataset.py      # é­”æ­æ•°æ®é›†ä¸‹è½½ä¸å­—æ®µæ˜ å°„å·¥å…·
```

## å¼€å‘ä¸æµ‹è¯•

- **åç«¯ä¾èµ–æ£€æŸ¥**ï¼š`python test_imports.py`
- **å‰ç«¯æ„å»ºæ£€æŸ¥**ï¼š`cd frontend && npm run build`
- æ›´å¤šå¼€å‘ç»†èŠ‚ã€ä»£ç è§„èŒƒä¸è¯Šæ–­æ–¹æ³•è¯·å‚é˜… [å¼€å‘ä¸æµ‹è¯•æ‰‹å†Œ](docs/development.md)ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](LICENSE) å¼€æºåè®®ã€‚
